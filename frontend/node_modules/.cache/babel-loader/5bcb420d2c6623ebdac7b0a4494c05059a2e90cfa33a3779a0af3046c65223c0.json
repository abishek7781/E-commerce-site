{"ast":null,"code":"var _jsxFileName = \"/Users/abishek/Documents/final_project/E-commerce-site/frontend/src/components/ProductItem.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { CartContext } from '../context/CartContext';\nimport { RealTimeContext } from '../context/RealTimeContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductItem = ({\n  product\n}) => {\n  _s();\n  var _product$stock;\n  const {\n    addToCart,\n    cartItems\n  } = useContext(CartContext);\n  const {\n    stockUpdates,\n    updateStock\n  } = useContext(RealTimeContext);\n  const [stock, setStock] = useState((_product$stock = product.stock) !== null && _product$stock !== void 0 ? _product$stock : 10); // default stock 10 if not provided\n\n  useEffect(() => {\n    if (stockUpdates && stockUpdates[product.id] !== undefined) {\n      setStock(stockUpdates[product.id]);\n    }\n  }, [stockUpdates, product.id]);\n  const isAdded = cartItems.some(item => item.id === product.id);\n  const isOutOfStock = stock === 0;\n  const handleAddToCart = () => {\n    if (stock > 0 && !isAdded) {\n      addToCart(product);\n      // Reduce stock by 1 and notify backend via socket\n      const newStock = stock - 1;\n      setStock(newStock);\n      updateStock(product.id, newStock);\n    }\n  };\n\n  // Sample image URL if product.image is not provided\n  const imageUrl = product.image || 'https://via.placeholder.com/240x160.png?text=Product+Image';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-item card\",\n    style: {\n      padding: '1rem',\n      borderRadius: '8px',\n      boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: imageUrl,\n      alt: product.name,\n      style: {\n        width: '100%',\n        borderRadius: '8px',\n        marginBottom: '15px',\n        objectFit: 'contain',\n        height: '160px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        fontSize: '1.2rem',\n        fontWeight: '600',\n        marginBottom: '0.5rem'\n      },\n      children: product.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price\",\n      style: {\n        fontSize: '1.1rem',\n        fontWeight: '700',\n        color: '#fb641b',\n        marginBottom: '0.5rem'\n      },\n      children: [\"\\u20B9\", product.price]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stock-status\",\n      style: {\n        marginBottom: '10px',\n        color: isOutOfStock ? '#ff3d00' : '#388e3c',\n        fontWeight: '600',\n        fontSize: '0.9rem',\n        border: '1px solid',\n        borderColor: isOutOfStock ? '#ff3d00' : '#388e3c',\n        borderRadius: '12px',\n        padding: '2px 8px',\n        display: 'inline-block'\n      },\n      children: isOutOfStock ? 'Out of Stock' : `In Stock: ${stock}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddToCart,\n      disabled: isAdded || isOutOfStock,\n      className: isAdded ? 'added' : '',\n      style: {\n        backgroundColor: isOutOfStock ? '#ccc' : '#2874f0',\n        color: '#fff',\n        border: 'none',\n        padding: '0.6rem 1.2rem',\n        borderRadius: '8px',\n        cursor: isOutOfStock || isAdded ? 'not-allowed' : 'pointer',\n        fontWeight: '700',\n        transition: 'background-color 0.3s ease',\n        width: '100%',\n        textTransform: 'uppercase',\n        letterSpacing: '1px'\n      },\n      onMouseEnter: e => {\n        if (!isOutOfStock && !isAdded) e.currentTarget.style.backgroundColor = '#1a5bb8';\n      },\n      onMouseLeave: e => {\n        if (!isOutOfStock && !isAdded) e.currentTarget.style.backgroundColor = '#2874f0';\n      },\n      children: isAdded ? 'Added' : isOutOfStock ? 'Out of Stock' : 'Add to Cart'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductItem, \"N2FAri2wP/h6+IWfL4sCVW6mSDs=\");\n_c = ProductItem;\nexport default ProductItem;\nvar _c;\n$RefreshReg$(_c, \"ProductItem\");","map":{"version":3,"names":["React","useState","useContext","useEffect","CartContext","RealTimeContext","jsxDEV","_jsxDEV","ProductItem","product","_s","_product$stock","addToCart","cartItems","stockUpdates","updateStock","stock","setStock","id","undefined","isAdded","some","item","isOutOfStock","handleAddToCart","newStock","imageUrl","image","className","style","padding","borderRadius","boxShadow","textAlign","children","src","alt","name","width","marginBottom","objectFit","height","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","fontWeight","color","price","border","borderColor","display","onClick","disabled","backgroundColor","cursor","transition","textTransform","letterSpacing","onMouseEnter","e","currentTarget","onMouseLeave","_c","$RefreshReg$"],"sources":["/Users/abishek/Documents/final_project/E-commerce-site/frontend/src/components/ProductItem.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { CartContext } from '../context/CartContext';\nimport { RealTimeContext } from '../context/RealTimeContext';\n\nconst ProductItem = ({ product }) => {\n  const { addToCart, cartItems } = useContext(CartContext);\n  const { stockUpdates, updateStock } = useContext(RealTimeContext);\n  const [stock, setStock] = useState(product.stock ?? 10); // default stock 10 if not provided\n\n  useEffect(() => {\n    if (stockUpdates && stockUpdates[product.id] !== undefined) {\n      setStock(stockUpdates[product.id]);\n    }\n  }, [stockUpdates, product.id]);\n\n  const isAdded = cartItems.some(item => item.id === product.id);\n  const isOutOfStock = stock === 0;\n\n  const handleAddToCart = () => {\n    if (stock > 0 && !isAdded) {\n      addToCart(product);\n      // Reduce stock by 1 and notify backend via socket\n      const newStock = stock - 1;\n      setStock(newStock);\n      updateStock(product.id, newStock);\n    }\n  };\n\n  // Sample image URL if product.image is not provided\n  const imageUrl = product.image || 'https://via.placeholder.com/240x160.png?text=Product+Image';\n\n  return (\n    <div\n      className=\"product-item card\"\n      style={{\n        padding: '1rem',\n        borderRadius: '8px',\n        boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n        textAlign: 'center',\n      }}\n    >\n      <img\n        src={imageUrl}\n        alt={product.name}\n        style={{ width: '100%', borderRadius: '8px', marginBottom: '15px', objectFit: 'contain', height: '160px' }}\n      />\n      <h3 style={{ fontSize: '1.2rem', fontWeight: '600', marginBottom: '0.5rem' }}>{product.name}</h3>\n      <div className=\"price\" style={{ fontSize: '1.1rem', fontWeight: '700', color: '#fb641b', marginBottom: '0.5rem' }}>\n        â‚¹{product.price}\n      </div>\n      <div\n        className=\"stock-status\"\n        style={{\n          marginBottom: '10px',\n          color: isOutOfStock ? '#ff3d00' : '#388e3c',\n          fontWeight: '600',\n          fontSize: '0.9rem',\n          border: '1px solid',\n          borderColor: isOutOfStock ? '#ff3d00' : '#388e3c',\n          borderRadius: '12px',\n          padding: '2px 8px',\n          display: 'inline-block',\n        }}\n      >\n        {isOutOfStock ? 'Out of Stock' : `In Stock: ${stock}`}\n      </div>\n      <button\n        onClick={handleAddToCart}\n        disabled={isAdded || isOutOfStock}\n        className={isAdded ? 'added' : ''}\n        style={{\n          backgroundColor: isOutOfStock ? '#ccc' : '#2874f0',\n          color: '#fff',\n          border: 'none',\n          padding: '0.6rem 1.2rem',\n          borderRadius: '8px',\n          cursor: isOutOfStock || isAdded ? 'not-allowed' : 'pointer',\n          fontWeight: '700',\n          transition: 'background-color 0.3s ease',\n          width: '100%',\n          textTransform: 'uppercase',\n          letterSpacing: '1px',\n        }}\n        onMouseEnter={(e) => {\n          if (!isOutOfStock && !isAdded) e.currentTarget.style.backgroundColor = '#1a5bb8';\n        }}\n        onMouseLeave={(e) => {\n          if (!isOutOfStock && !isAdded) e.currentTarget.style.backgroundColor = '#2874f0';\n        }}\n      >\n        {isAdded ? 'Added' : isOutOfStock ? 'Out of Stock' : 'Add to Cart'}\n      </button>\n    </div>\n  );\n};\n\nexport default ProductItem;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,eAAe,QAAQ,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7D,MAAMC,WAAW,GAAGA,CAAC;EAAEC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EAAA,IAAAC,cAAA;EACnC,MAAM;IAAEC,SAAS;IAAEC;EAAU,CAAC,GAAGX,UAAU,CAACE,WAAW,CAAC;EACxD,MAAM;IAAEU,YAAY;IAAEC;EAAY,CAAC,GAAGb,UAAU,CAACG,eAAe,CAAC;EACjE,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,EAAAU,cAAA,GAACF,OAAO,CAACO,KAAK,cAAAL,cAAA,cAAAA,cAAA,GAAI,EAAE,CAAC,CAAC,CAAC;;EAEzDR,SAAS,CAAC,MAAM;IACd,IAAIW,YAAY,IAAIA,YAAY,CAACL,OAAO,CAACS,EAAE,CAAC,KAAKC,SAAS,EAAE;MAC1DF,QAAQ,CAACH,YAAY,CAACL,OAAO,CAACS,EAAE,CAAC,CAAC;IACpC;EACF,CAAC,EAAE,CAACJ,YAAY,EAAEL,OAAO,CAACS,EAAE,CAAC,CAAC;EAE9B,MAAME,OAAO,GAAGP,SAAS,CAACQ,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACJ,EAAE,KAAKT,OAAO,CAACS,EAAE,CAAC;EAC9D,MAAMK,YAAY,GAAGP,KAAK,KAAK,CAAC;EAEhC,MAAMQ,eAAe,GAAGA,CAAA,KAAM;IAC5B,IAAIR,KAAK,GAAG,CAAC,IAAI,CAACI,OAAO,EAAE;MACzBR,SAAS,CAACH,OAAO,CAAC;MAClB;MACA,MAAMgB,QAAQ,GAAGT,KAAK,GAAG,CAAC;MAC1BC,QAAQ,CAACQ,QAAQ,CAAC;MAClBV,WAAW,CAACN,OAAO,CAACS,EAAE,EAAEO,QAAQ,CAAC;IACnC;EACF,CAAC;;EAED;EACA,MAAMC,QAAQ,GAAGjB,OAAO,CAACkB,KAAK,IAAI,4DAA4D;EAE9F,oBACEpB,OAAA;IACEqB,SAAS,EAAC,mBAAmB;IAC7BC,KAAK,EAAE;MACLC,OAAO,EAAE,MAAM;MACfC,YAAY,EAAE,KAAK;MACnBC,SAAS,EAAE,2BAA2B;MACtCC,SAAS,EAAE;IACb,CAAE;IAAAC,QAAA,gBAEF3B,OAAA;MACE4B,GAAG,EAAET,QAAS;MACdU,GAAG,EAAE3B,OAAO,CAAC4B,IAAK;MAClBR,KAAK,EAAE;QAAES,KAAK,EAAE,MAAM;QAAEP,YAAY,EAAE,KAAK;QAAEQ,YAAY,EAAE,MAAM;QAAEC,SAAS,EAAE,SAAS;QAAEC,MAAM,EAAE;MAAQ;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5G,CAAC,eACFtC,OAAA;MAAIsB,KAAK,EAAE;QAAEiB,QAAQ,EAAE,QAAQ;QAAEC,UAAU,EAAE,KAAK;QAAER,YAAY,EAAE;MAAS,CAAE;MAAAL,QAAA,EAAEzB,OAAO,CAAC4B;IAAI;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACjGtC,OAAA;MAAKqB,SAAS,EAAC,OAAO;MAACC,KAAK,EAAE;QAAEiB,QAAQ,EAAE,QAAQ;QAAEC,UAAU,EAAE,KAAK;QAAEC,KAAK,EAAE,SAAS;QAAET,YAAY,EAAE;MAAS,CAAE;MAAAL,QAAA,GAAC,QAChH,EAACzB,OAAO,CAACwC,KAAK;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACZ,CAAC,eACNtC,OAAA;MACEqB,SAAS,EAAC,cAAc;MACxBC,KAAK,EAAE;QACLU,YAAY,EAAE,MAAM;QACpBS,KAAK,EAAEzB,YAAY,GAAG,SAAS,GAAG,SAAS;QAC3CwB,UAAU,EAAE,KAAK;QACjBD,QAAQ,EAAE,QAAQ;QAClBI,MAAM,EAAE,WAAW;QACnBC,WAAW,EAAE5B,YAAY,GAAG,SAAS,GAAG,SAAS;QACjDQ,YAAY,EAAE,MAAM;QACpBD,OAAO,EAAE,SAAS;QAClBsB,OAAO,EAAE;MACX,CAAE;MAAAlB,QAAA,EAEDX,YAAY,GAAG,cAAc,GAAG,aAAaP,KAAK;IAAE;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClD,CAAC,eACNtC,OAAA;MACE8C,OAAO,EAAE7B,eAAgB;MACzB8B,QAAQ,EAAElC,OAAO,IAAIG,YAAa;MAClCK,SAAS,EAAER,OAAO,GAAG,OAAO,GAAG,EAAG;MAClCS,KAAK,EAAE;QACL0B,eAAe,EAAEhC,YAAY,GAAG,MAAM,GAAG,SAAS;QAClDyB,KAAK,EAAE,MAAM;QACbE,MAAM,EAAE,MAAM;QACdpB,OAAO,EAAE,eAAe;QACxBC,YAAY,EAAE,KAAK;QACnByB,MAAM,EAAEjC,YAAY,IAAIH,OAAO,GAAG,aAAa,GAAG,SAAS;QAC3D2B,UAAU,EAAE,KAAK;QACjBU,UAAU,EAAE,4BAA4B;QACxCnB,KAAK,EAAE,MAAM;QACboB,aAAa,EAAE,WAAW;QAC1BC,aAAa,EAAE;MACjB,CAAE;MACFC,YAAY,EAAGC,CAAC,IAAK;QACnB,IAAI,CAACtC,YAAY,IAAI,CAACH,OAAO,EAAEyC,CAAC,CAACC,aAAa,CAACjC,KAAK,CAAC0B,eAAe,GAAG,SAAS;MAClF,CAAE;MACFQ,YAAY,EAAGF,CAAC,IAAK;QACnB,IAAI,CAACtC,YAAY,IAAI,CAACH,OAAO,EAAEyC,CAAC,CAACC,aAAa,CAACjC,KAAK,CAAC0B,eAAe,GAAG,SAAS;MAClF,CAAE;MAAArB,QAAA,EAEDd,OAAO,GAAG,OAAO,GAAGG,YAAY,GAAG,cAAc,GAAG;IAAa;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5D,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV,CAAC;AAACnC,EAAA,CA1FIF,WAAW;AAAAwD,EAAA,GAAXxD,WAAW;AA4FjB,eAAeA,WAAW;AAAC,IAAAwD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}