{"ast":null,"code":"var _jsxFileName = \"/Users/abishek/Documents/final_project/E-commerce-site/frontend/src/components/ProductItem.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { CartContext } from '../context/CartContext';\nimport { RealTimeContext } from '../context/RealTimeContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductItem = ({\n  product\n}) => {\n  _s();\n  var _product$stock;\n  const {\n    addToCart,\n    cartItems\n  } = useContext(CartContext);\n  const {\n    stockUpdates\n  } = useContext(RealTimeContext);\n  const [added, setAdded] = useState(false);\n  const [stock, setStock] = useState((_product$stock = product.stock) !== null && _product$stock !== void 0 ? _product$stock : 10); // default stock 10 if not provided\n\n  useEffect(() => {\n    if (stockUpdates && stockUpdates[product.id] !== undefined) {\n      setStock(stockUpdates[product.id]);\n    }\n  }, [stockUpdates, product.id]);\n  const handleAddToCart = () => {\n    if (stock > 0) {\n      addToCart(product);\n      setAdded(true);\n      setTimeout(() => setAdded(false), 1500);\n    }\n  };\n  const isAdded = cartItems.some(item => item.id === product.id);\n  const isOutOfStock = stock === 0;\n\n  // Sample image URL if product.image is not provided\n  const imageUrl = product.image || 'https://via.placeholder.com/240x160.png?text=Product+Image';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: imageUrl,\n      alt: product.name,\n      style: {\n        width: '100%',\n        borderRadius: '8px',\n        marginBottom: '15px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: product.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price\",\n      children: [\"\\u20B9\", product.price]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stock-status\",\n      style: {\n        marginBottom: '10px',\n        color: isOutOfStock ? 'red' : 'green'\n      },\n      children: isOutOfStock ? 'Out of Stock' : `In Stock: ${stock}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddToCart,\n      disabled: isAdded || added || isOutOfStock,\n      className: isAdded || added ? 'added' : '',\n      children: isAdded || added ? 'Added!' : isOutOfStock ? 'Out of Stock' : 'Add to Cart'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductItem, \"5CAIpomOmFzgoq7tL2qBCMmocZg=\");\n_c = ProductItem;\nexport default ProductItem;\nvar _c;\n$RefreshReg$(_c, \"ProductItem\");","map":{"version":3,"names":["React","useState","useContext","useEffect","CartContext","RealTimeContext","jsxDEV","_jsxDEV","ProductItem","product","_s","_product$stock","addToCart","cartItems","stockUpdates","added","setAdded","stock","setStock","id","undefined","handleAddToCart","setTimeout","isAdded","some","item","isOutOfStock","imageUrl","image","className","children","src","alt","name","style","width","borderRadius","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","price","color","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/abishek/Documents/final_project/E-commerce-site/frontend/src/components/ProductItem.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { CartContext } from '../context/CartContext';\nimport { RealTimeContext } from '../context/RealTimeContext';\n\nconst ProductItem = ({ product }) => {\n  const { addToCart, cartItems } = useContext(CartContext);\n  const { stockUpdates } = useContext(RealTimeContext);\n  const [added, setAdded] = useState(false);\n  const [stock, setStock] = useState(product.stock ?? 10); // default stock 10 if not provided\n\n  useEffect(() => {\n    if (stockUpdates && stockUpdates[product.id] !== undefined) {\n      setStock(stockUpdates[product.id]);\n    }\n  }, [stockUpdates, product.id]);\n\n  const handleAddToCart = () => {\n    if (stock > 0) {\n      addToCart(product);\n      setAdded(true);\n      setTimeout(() => setAdded(false), 1500);\n    }\n  };\n\n  const isAdded = cartItems.some(item => item.id === product.id);\n  const isOutOfStock = stock === 0;\n\n  // Sample image URL if product.image is not provided\n  const imageUrl = product.image || 'https://via.placeholder.com/240x160.png?text=Product+Image';\n\n  return (\n    <div className=\"product-item\">\n      <img src={imageUrl} alt={product.name} style={{ width: '100%', borderRadius: '8px', marginBottom: '15px' }} />\n      <h3>{product.name}</h3>\n      <div className=\"price\">â‚¹{product.price}</div>\n      <div className=\"stock-status\" style={{ marginBottom: '10px', color: isOutOfStock ? 'red' : 'green' }}>\n        {isOutOfStock ? 'Out of Stock' : `In Stock: ${stock}`}\n      </div>\n      <button onClick={handleAddToCart} disabled={isAdded || added || isOutOfStock} className={isAdded || added ? 'added' : ''}>\n        {isAdded || added ? 'Added!' : isOutOfStock ? 'Out of Stock' : 'Add to Cart'}\n      </button>\n    </div>\n  );\n};\n\nexport default ProductItem;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}